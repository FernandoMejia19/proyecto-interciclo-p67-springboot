<div class="perfil-publico-container" *ngIf="!loading; else cargando">
    
    <div class="volver-atras">
        <button class="btn-volver" (click)="volverAtras()">
            <span class="flecha">‚Üê</span> Volver
        </button>
    </div>

    <div class="header-perfil" *ngIf="programador">
        <img 
            *ngIf="programador.photoURL; else sinFoto"
            [src]="programador.photoURL" 
            alt="Foto del programador"
            class="avatar"
        >

        <ng-template #sinFoto>
            <div class="avatar-placeholder">
                {{ programador.nombre?.[0] || 'U' }}
            </div>
        </ng-template>

        <div class="info">
            <h1>{{ programador.nombre || 'Programador' }}</h1>
            <p class="desc">{{ programador.descripcion || 'Sin descripci√≥n' }}</p>

            <div class="badges">
                <span class="badge" *ngFor="let tech of programador.tecnologias">
                    {{ tech }}
                </span>
            </div>
        </div>
    </div>

    <hr>

    <div class="seccion-reserva">
        <h2>üìÖ Disponibilidad para Asesor√≠as</h2>

        <p class="texto-explicacion">
            Selecciona un horario disponible para enviar tu solicitud.
        </p>

        <div *ngIf="horariosDisponibles.length === 0" class="sin-horarios">
            <p>Este programador no tiene horarios disponibles por el momento.</p>
        </div>

        <!-- HORARIOS -->
        <div class="grid-horarios">
            <div class="card-horario" *ngFor="let slot of horariosDisponibles">
                <div class="fecha"><strong>{{ slot.fecha }}</strong></div>
                <div class="hora">‚è∞ {{ slot.horaInicio }} - {{ slot.horaFin }}</div>

                <button class="btn-reservar" (click)="reservarCita(slot)">
                    Reservar Cita
                </button> 
            </div>
        </div>
    </div>
    
    <div class="seccion-proyectos" *ngIf="proyectos && proyectos.length > 0">
        <h2>üìå Proyectos del Programador</h2>
        
        <div class="grid-proyectos">
            <div class="card-proyecto" *ngFor="let p of proyectos">
                <h3 class="titulo">{{ p.titulo }}</h3>
            <p class="descripcion">{{ p.descripcion }}</p>
            
            <div class="tecnologias" *ngIf="p.tecnologias?.length">
                <span class="tech" *ngFor="let t of p.tecnologias">{{ t }}</span>
            </div>
            
            <button class="btn-ver" (click)="verProyecto(p.id)">Ver Proyecto</button>
        </div>
    </div>
</div>

<div class="seccion-proyectos" *ngIf="proyectos && proyectos.length === 0">
    <h2>üìå Proyectos del Programador</h2>
    <p class="sin-proyectos">Este programador a√∫n no ha creado proyectos.</p>
</div>
</div>

<ng-template #cargando>
    <div class="loading">Cargando perfil...</div>
</ng-template>
